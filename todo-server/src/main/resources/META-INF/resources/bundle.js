var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function c(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function f(){return l(" ")}function d(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){(null!=n||t.value)&&(t.value=n)}let m;function y(t){m=t}function g(){if(!m)throw new Error("Function called outside component initialization");return m}const $=[],b=[],w=[],v=[],_=Promise.resolve();let x=!1;function k(t){w.push(t)}function E(){const t=new Set;do{for(;$.length;){const t=$.shift();y(t),j(t.$$)}for(;b.length;)b.pop()();for(let n=0;n<w.length;n+=1){const e=w[n];t.has(e)||(e(),t.add(e))}w.length=0}while($.length);for(;v.length;)v.pop()();x=!1}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const T=new Set;function M(t,n){t&&t.i&&(T.delete(t),t.i(n))}function S(t,n){t.d(1),n.delete(t.key)}function N(t,n){-1===t.$$.dirty[0]&&($.push(t),x||(x=!0,_.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function A(r,i,s,a,u,l,f=[-1]){const d=m;y(r);const p=i.props||{},h=r.$$={fragment:null,ctx:null,props:l,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:f};let g=!1;var $;h.ctx=s?s(r,p,(t,n,e=n)=>(h.ctx&&u(h.ctx[t],h.ctx[t]=e)&&(h.bound[t]&&h.bound[t](e),g&&N(r,t)),n)):[],h.update(),g=!0,o(h.before_update),h.fragment=!!a&&a(h.ctx),i.target&&(i.hydrate?h.fragment&&h.fragment.l(($=i.target,Array.from($.childNodes))):h.fragment&&h.fragment.c(),i.intro&&M(r.$$.fragment),function(t,e,r){const{fragment:i,on_mount:s,on_destroy:a,after_update:u}=t.$$;i&&i.m(e,r),k(()=>{const e=s.map(n).filter(c);a?a.push(...e):o(e),t.$$.on_mount=[]}),u.forEach(k)}(r,i.target,i.anchor),E()),y(d)}class C{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function L(t,n,e){const o=t.slice();return o[8]=n[e],o}function O(t,n){let e,c,r,h,m,y,g,$,b,w,v,_,x,k,E=n[8].txt+"";function j(...t){return n[5](n[8],...t)}function T(...t){return n[6](n[8],...t)}return{key:t,first:null,c(){e=u("li"),c=u("input"),h=f(),m=u("label"),g=f(),$=u("span"),b=l(E),w=f(),(v=u("button")).innerHTML='<svg><use href="#delete-icon"></use></svg>',_=f(),p(c,"id",r=n[8].id),p(c,"type","checkbox"),p(m,"for",y=n[8].id),p(m,"class","tick"),p(v,"class","delete-todo"),p(e,"class",x="todo-item "+(n[8].completed?"done":"")),k=[d(m,"click",j),d(v,"click",T)],this.first=e},m(t,n){s(t,e,n),i(e,c),i(e,h),i(e,m),i(e,g),i(e,$),i($,b),i(e,w),i(e,v),i(e,_)},p(t,o){var i,s;n=t,1&o&&r!==(r=n[8].id)&&p(c,"id",r),1&o&&y!==(y=n[8].id)&&p(m,"for",y),1&o&&E!==(E=n[8].txt+"")&&(s=""+(s=E),(i=b).data!==s&&(i.data=s)),1&o&&x!==(x="todo-item "+(n[8].completed?"done":""))&&p(e,"class",x)},d(t){t&&a(e),o(k)}}}function P(n){let e,c,r,l,m,y,g,$,b,w,v,_=[],x=new Map,k=n[0];const E=t=>t[8].id;for(let t=0;t<k.length;t+=1){let e=L(n,k,t),o=E(e);x.set(o,_[t]=O(o,e))}return{c(){e=u("main"),c=u("div"),(r=u("h1")).textContent="todos",l=f(),m=u("ul");for(let t=0;t<_.length;t+=1)_[t].c();var t;y=f(),(g=u("div")).innerHTML='<svg class="checklist-icon"><use href="#checklist-icon"></use></svg> \n      <h2 class="empty-state__title">Add your first todo</h2> \n      <p class="empty-state__description">What do you want to get done today?</p>',$=f(),b=u("form"),w=u("input"),p(r,"class","app-title"),p(m,"class","todo-list"),p(g,"class","empty-state"),p(w,"class","js-todo-input"),p(w,"type","text"),p(w,"aria-label","Enter a new todo item"),p(w,"placeholder","E.g. Build a web app"),p(c,"class","container"),v=[d(w,"input",n[7]),d(b,"submit",(t=n[2],function(n){return n.preventDefault(),t.call(this,n)}))]},m(t,o){s(t,e,o),i(e,c),i(c,r),i(c,l),i(c,m);for(let t=0;t<_.length;t+=1)_[t].m(m,null);i(c,y),i(c,g),i(c,$),i(c,b),i(b,w),h(w,n[1])},p(t,[n]){const e=t[0];_=function(t,n,e,o,c,r,i,s,a,u,l,f){let d=t.length,p=r.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const y=[],g=new Map,$=new Map;for(h=p;h--;){const t=f(c,r,h),s=e(t);let a=i.get(s);a?o&&a.p(t,n):(a=u(s,t)).c(),g.set(s,y[h]=a),s in m&&$.set(s,Math.abs(h-m[s]))}const b=new Set,w=new Set;function v(t){M(t,1),t.m(s,l),i.set(t.key,t),l=t.first,p--}for(;d&&p;){const n=y[p-1],e=t[d-1],o=n.key,c=e.key;n===e?(l=n.first,d--,p--):g.has(c)?!i.has(o)||b.has(o)?v(n):w.has(c)?d--:$.get(o)>$.get(c)?(w.add(o),v(n)):(b.add(c),d--):(a(e,i),d--)}for(;d--;){const n=t[d];g.has(n.key)||a(n,i)}for(;p;)v(y[p-1]);return y}(_,n,E,1,t,e,x,m,S,O,null,L),2&n&&w.value!==t[1]&&h(w,t[1])},i:t,o:t,d(t){t&&a(e);for(let t=0;t<_.length;t+=1)_[t].d();o(v)}}}function q(t,n,e){let o=[];var c;c=async function(){const t=await fetch("/todos"),n=await t.json();e(0,o=n)},g().$$.on_mount.push(c),function(t){g().$$.after_update.push(t)}(()=>{document.querySelector(".js-todo-input").focus()});let r="";function i(t){const n=o.findIndex(n=>n.id===Number(t));e(0,o[n].completed=!o[n].completed,o),async function(t){const n=await fetch("/todos/"+t.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});t=await n.json()}(o[n])}async function s(t){const n=await fetch("/todos/"+t,{method:"DELETE"});await n.ok&&e(0,o=o.filter(n=>n.id!==Number(t)))}return[o,r,async function(){if(e(1,r=r.trim()),!r)return;const t=await fetch("/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:r}),n=await t.json();e(0,o=[...o,n]),e(1,r="")},i,s,t=>i(t.id),t=>s(t.id),function(){r=this.value,e(1,r)}]}return new class extends C{constructor(t){super(),A(this,t,q,P,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
